{"version":3,"sources":["../../server/next.ts"],"names":["createServer","options","standardEnv","isNextDevCommand","process","env","NODE_ENV","includes","log","warn","NON_STANDARD_NODE_ENV","dev","Server","require","default","module","exports"],"mappings":"4DAAA,qFACA,2CACA,gE,w4BASA;AACA,QAASA,CAAAA,YAAT,CAAsBC,OAAtB,CAA8D,CAC5D,KAAMC,CAAAA,WAAW,CAAG,CAAC,YAAD,CAAe,aAAf,CAA8B,MAA9B,CAApB,CAEA,GACE,CAAED,OAAD,CAAiBE,gBAAlB,EACAC,OAAO,CAACC,GAAR,CAAYC,QADZ,EAEA,CAACJ,WAAW,CAACK,QAAZ,CAAqBH,OAAO,CAACC,GAAR,CAAYC,QAAjC,CAHH,CAIE,CACAE,GAAG,CAACC,IAAJ,CAASC,gCAAT,EACD,CAED,GAAIT,OAAO,CAACU,GAAZ,CAAiB,CACf,KAAMC,CAAAA,MAAM,CAAGC,OAAO,CAAC,mBAAD,CAAP,CAA6BC,OAA5C,CACA,MAAO,IAAIF,CAAAA,MAAJ,CAAWX,OAAX,CAAP,CACD,CAED,MAAO,IAAIW,oBAAJ,CAAWX,OAAX,CAAP,CACD,CAED;AACAc,MAAM,CAACC,OAAP,CAAiBhB,YAAjB,CACAgB,OAAO,CAAGD,MAAM,CAACC,OAAjB,CAEA;aACehB,Y","sourcesContent":["import Server, { ServerConstructor } from '../next-server/server/next-server'\nimport { NON_STANDARD_NODE_ENV } from '../lib/constants'\nimport * as log from '../build/output/log'\n\ntype NextServerConstructor = Omit<ServerConstructor, 'staticMarkup'> & {\n  /**\n   * Whether to launch Next.js in dev mode - @default false\n   */\n  dev?: boolean\n}\n\n// This file is used for when users run `require('next')`\nfunction createServer(options: NextServerConstructor): Server {\n  const standardEnv = ['production', 'development', 'test']\n\n  if (\n    !(options as any).isNextDevCommand &&\n    process.env.NODE_ENV &&\n    !standardEnv.includes(process.env.NODE_ENV)\n  ) {\n    log.warn(NON_STANDARD_NODE_ENV)\n  }\n\n  if (options.dev) {\n    const Server = require('./next-dev-server').default\n    return new Server(options)\n  }\n\n  return new Server(options)\n}\n\n// Support commonjs `require('next')`\nmodule.exports = createServer\nexports = module.exports\n\n// Support `import next from 'next'`\nexport default createServer\n"]}