{"version":3,"sources":["../../cli/next-build.ts"],"names":["nextBuild","argv","args","Boolean","dir","_","then","process","exit","catch","err","console","error"],"mappings":"AAAA;8DACA,sBACA,8EACA,0BAGA,uDACA,0C,mFAEA,KAAMA,CAAAA,SAAqB,CAAIC,IAAD,EAAU,CACtC,KAAMC,CAAAA,IAAI,CAAG,mBACX,CACE;AACA,SAAUC,OAFZ,CAGE;AACA,KAAM,QAJR,CADW,CAOX,CAAEF,IAAF,CAPW,CAAb,CAUA,GAAIC,IAAI,CAAC,QAAD,CAAR,CAAoB,CAClB,wBACG;;;;;;;;;KADH,CAWE,CAXF,EAaD,CAED,KAAME,CAAAA,GAAG,CAAG,kBAAQF,IAAI,CAACG,CAAL,CAAO,CAAP,GAAa,GAArB,CAAZ,CAEA;AACA,GAAI,CAAC,mBAAWD,GAAX,CAAL,CAAsB,CACpB,wBAAc,mDAAkDA,GAAI,EAApE,EACD,CAED,mBAAMA,GAAN,EACGE,IADH,CACQ,IAAMC,OAAO,CAACC,IAAR,CAAa,CAAb,CADd,EAEGC,KAFH,CAEUC,GAAD,EAAS,CACdC,OAAO,CAACC,KAAR,CAAc,EAAd,EACAD,OAAO,CAACC,KAAR,CAAc,wBAAd,EACA,wBAAaF,GAAb,EACD,CANH,EAOD,CAzCD,C","sourcesContent":["#!/usr/bin/env node\nimport { existsSync } from 'fs'\nimport arg from 'next/dist/compiled/arg/index.js'\nimport { resolve } from 'path'\n\nimport { cliCommand } from '../bin/next'\nimport build from '../build'\nimport { printAndExit } from '../server/lib/utils'\n\nconst nextBuild: cliCommand = (argv) => {\n  const args = arg(\n    {\n      // Types\n      '--help': Boolean,\n      // Aliases\n      '-h': '--help',\n    },\n    { argv }\n  )\n\n  if (args['--help']) {\n    printAndExit(\n      `\n      Description\n        Compiles the application for production deployment\n\n      Usage\n        $ next build <dir>\n\n      <dir> represents the directory of the Next.js application.\n      If no directory is provided, the current directory will be used.\n    `,\n      0\n    )\n  }\n\n  const dir = resolve(args._[0] || '.')\n\n  // Check if the provided directory exists\n  if (!existsSync(dir)) {\n    printAndExit(`> No such directory exists as the project root: ${dir}`)\n  }\n\n  build(dir)\n    .then(() => process.exit(0))\n    .catch((err) => {\n      console.error('')\n      console.error('> Build error occurred')\n      printAndExit(err)\n    })\n}\n\nexport { nextBuild }\n"]}