{"version":3,"sources":["../../build/webpack-config.ts"],"names":["isWebpack5","parseInt","webpack","version","escapePathVariables","value","replace","parseJsonFile","path","JSON5","require","contents","trim","parse","err","codeFrame","String","start","line","lineNumber","column","columnNumber","message","highlightCode","Error","getOptimizedAliases","isServer","stubWindowFetch","join","__dirname","stubObjectAssign","shimAssign","Object","assign","unfetch$","url","resolve","getBaseWebpackConfig","dir","buildId","config","dev","pagesDir","tracer","target","entrypoints","productionBrowserSourceMaps","experimental","plugins","babelPresetPlugins","env","pluginLoaderOptions","plugin","middleware","includes","push","directory","hasReactRefresh","distDir","defaultLoaders","babel","loader","options","cwd","cache","hasModern","modern","development","hotSelfAccept","babelIncludeRegexes","VALID_MIDDLEWARE","map","name","RegExp","nodePathList","process","NODE_PATH","split","platform","filter","p","isServerless","isServerlessTrace","isLikeServerless","outputDir","SERVERLESS_DIRECTORY","SERVER_DIRECTORY","outputPath","totalPages","keys","length","clientEntries","CLIENT_STATIC_FILES_RUNTIME_MAIN","sep","relative","NEXT_PROJECT_ROOT_DIST_CLIENT","CLIENT_STATIC_FILES_RUNTIME_POLYFILLS","undefined","typeScriptPath","_","tsConfigPath","useTypeScript","Boolean","ignoreTypeScriptErrors","typescript","ignoreBuildErrors","jsConfig","jsConfigPath","resolvedBaseUrl","compilerOptions","baseUrl","resolveConfig","extensions","modules","alias","next","NEXT_PROJECT_ROOT","PAGES_DIR_ALIAS","DOT_NEXT_ALIAS","mainFields","PnpWebpackPlugin","webpackMode","terserOptions","ecma","compress","warnings","comparisons","inline","mangle","safari10","output","comments","ascii_only","devtool","isModuleCSS","module","type","splitChunksConfigs","cacheGroups","default","vendors","prod","chunks","commons","minChunks","react","test","prodGranular","framework","priority","enforce","lib","size","identifier","hash","crypto","createHash","updateHash","libIdent","update","context","digest","substring","reuseExistingChunk","shared","reduce","acc","chunk","maxInitialRequests","minSize","splitChunksConfig","granularChunks","crossOrigin","customAppFile","pageExtensions","conformanceConfig","ReactSyncScriptsConformanceCheck","enabled","MinificationConformanceCheck","DuplicatePolyfillsConformanceCheck","BlockedAPIToBePolyfilled","conformance","GranularChunksConformanceCheck","webpackConfig","externals","request","callback","notExternalModules","indexOf","isLocal","startsWith","posix","isAbsolute","win32","isLikelyNextExternal","res","isNextExternal","baseRes","match","externalRequest","optimization","checkWasmTypes","nodeEnv","splitChunks","runtimeChunk","CLIENT_STATIC_FILES_RUNTIME_WEBPACK","minimize","minimizer","TerserPlugin","extractComments","parallel","cpus","CssMinimizerPlugin","postcssOptions","annotation","node","setImmediate","entry","filename","libraryTarget","hotUpdateChunkFilename","hotUpdateMainFilename","chunkFilename","strictModuleExceptionHandling","crossOriginLoading","futureEmitAssets","webassemblyModuleFilename","performance","resolveLoader","rules","include","exclude","some","r","use","babelMultiThread","cacheContext","cacheDirectory","cacheIdentifier","workers","workerParallelJobs","Infinity","ReactRefreshWebpackPlugin","ChunkNamesPlugin","DefinePlugin","prev","key","JSON","stringify","__NEXT_TEST_MODE","exportTrailingSlash","devIndicators","buildActivity","autoPrerender","reactStrictMode","reactMode","basePath","pageEnv","NODE_ENV","ReactLoadablePlugin","REACT_LOADABLE_MANIFEST","DropClientPage","future","excludeDefaultMomentLocales","IgnorePlugin","NextJsRequireCacheHotReloader","UnlinkRemovedPagesPlugin","devPlugins","NoEmitOnErrorsPlugin","AutoDllPlugin","dll","mode","HotModuleReplacementPlugin","HashedModuleIdsPlugin","resourceRegExp","contextRegExp","ServerlessPlugin","PagesManifestPlugin","NextJsSSRModuleCachePlugin","NextJsSsrImportPlugin","BuildManifestPlugin","clientManifest","ProfilingPlugin","ForkTsCheckerWebpackPlugin","forkTsCheckerOptions","async","useTypescriptIncrementalApi","checkSyntacticErrors","tsconfig","reportFiles","isolatedModules","noEmit","silent","formatter","NextEsmPlugin","excludedPlugins","getFileName","args","inputChunkName","WebpackConformancePlugin","tests","AllowedSources","allowedSources","WellKnownErrorsPlugin","paths","unshift","JsConfigPathsPlugin","rootDirectory","isDevelopment","assetPrefix","sassOptions","then","console","warn","canMatchCss","rule","fileNames","input","Array","isArray","hasUserCssConfig","chalk","yellow","bold","oneOf","__next_css_remove","e","foundTsRule","forEach","call","isSass","source","isLess","isCss","isStylus","prototype","hasOwnProperty","correctNextCss","correctCssLoader","originalEntry","originalFile","library"],"mappings":"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","sourcesContent":["import ReactRefreshWebpackPlugin from '@next/react-refresh-utils/ReactRefreshWebpackPlugin'\nimport crypto from 'crypto'\nimport ForkTsCheckerWebpackPlugin from 'fork-ts-checker-webpack-plugin'\nimport { readFileSync } from 'fs'\nimport chalk from 'next/dist/compiled/chalk'\nimport TerserPlugin from 'next/dist/compiled/terser-webpack-plugin'\nimport path from 'path'\nimport PnpWebpackPlugin from 'pnp-webpack-plugin'\nimport webpack from 'webpack'\nimport {\n  DOT_NEXT_ALIAS,\n  NEXT_PROJECT_ROOT,\n  NEXT_PROJECT_ROOT_DIST_CLIENT,\n  PAGES_DIR_ALIAS,\n} from '../lib/constants'\nimport { fileExists } from '../lib/file-exists'\nimport { resolveRequest } from '../lib/resolve-request'\nimport {\n  CLIENT_STATIC_FILES_RUNTIME_MAIN,\n  CLIENT_STATIC_FILES_RUNTIME_POLYFILLS,\n  CLIENT_STATIC_FILES_RUNTIME_WEBPACK,\n  REACT_LOADABLE_MANIFEST,\n  SERVERLESS_DIRECTORY,\n  SERVER_DIRECTORY,\n} from '../next-server/lib/constants'\nimport { findPageFile } from '../server/lib/find-page-file'\nimport { WebpackEntrypoints } from './entries'\nimport {\n  collectPlugins,\n  PluginMetaData,\n  VALID_MIDDLEWARE,\n} from './plugins/collect-plugins'\nimport { build as buildConfiguration } from './webpack/config'\nimport { __overrideCssConfiguration } from './webpack/config/blocks/css/overrideCssConfiguration'\nimport { pluginLoaderOptions } from './webpack/loaders/next-plugin-loader'\nimport BuildManifestPlugin from './webpack/plugins/build-manifest-plugin'\nimport ChunkNamesPlugin from './webpack/plugins/chunk-names-plugin'\nimport { CssMinimizerPlugin } from './webpack/plugins/css-minimizer-plugin'\nimport { JsConfigPathsPlugin } from './webpack/plugins/jsconfig-paths-plugin'\nimport { DropClientPage } from './webpack/plugins/next-drop-client-page-plugin'\nimport NextEsmPlugin from './webpack/plugins/next-esm-plugin'\nimport NextJsSsrImportPlugin from './webpack/plugins/nextjs-ssr-import'\nimport NextJsSSRModuleCachePlugin from './webpack/plugins/nextjs-ssr-module-cache'\nimport PagesManifestPlugin from './webpack/plugins/pages-manifest-plugin'\nimport { ProfilingPlugin } from './webpack/plugins/profiling-plugin'\nimport { ReactLoadablePlugin } from './webpack/plugins/react-loadable-plugin'\nimport { ServerlessPlugin } from './webpack/plugins/serverless-plugin'\nimport WebpackConformancePlugin, {\n  DuplicatePolyfillsConformanceCheck,\n  MinificationConformanceCheck,\n  ReactSyncScriptsConformanceCheck,\n  GranularChunksConformanceCheck,\n} from './webpack/plugins/webpack-conformance-plugin'\nimport { WellKnownErrorsPlugin } from './webpack/plugins/wellknown-errors-plugin'\nimport { codeFrameColumns } from '@babel/code-frame'\n\ntype ExcludesFalse = <T>(x: T | false) => x is T\n\nconst isWebpack5 = parseInt(webpack.version!) === 5\n\nconst escapePathVariables = (value: any) => {\n  return typeof value === 'string'\n    ? value.replace(/\\[(\\\\*[\\w:]+\\\\*)\\]/gi, '[\\\\$1\\\\]')\n    : value\n}\n\nfunction parseJsonFile(path: string) {\n  const JSON5 = require('next/dist/compiled/json5')\n  const contents = readFileSync(path, 'utf8')\n\n  // Special case an empty file\n  if (contents.trim() === '') {\n    return {}\n  }\n\n  try {\n    return JSON5.parse(contents)\n  } catch (err) {\n    const codeFrame = codeFrameColumns(\n      String(contents),\n      { start: { line: err.lineNumber, column: err.columnNumber } },\n      { message: err.message, highlightCode: true }\n    )\n    throw new Error(`Failed to parse \"${path}\":\\n${codeFrame}`)\n  }\n}\n\nfunction getOptimizedAliases(isServer: boolean): { [pkg: string]: string } {\n  if (isServer) {\n    return {}\n  }\n\n  const stubWindowFetch = path.join(__dirname, 'polyfills', 'fetch', 'index.js')\n  const stubObjectAssign = path.join(__dirname, 'polyfills', 'object-assign.js')\n\n  const shimAssign = path.join(__dirname, 'polyfills', 'object.assign')\n  return Object.assign(\n    {},\n    {\n      unfetch$: stubWindowFetch,\n      'isomorphic-unfetch$': stubWindowFetch,\n      'whatwg-fetch$': path.join(\n        __dirname,\n        'polyfills',\n        'fetch',\n        'whatwg-fetch.js'\n      ),\n    },\n    {\n      'object-assign$': stubObjectAssign,\n\n      // Stub Package: object.assign\n      'object.assign/auto': path.join(shimAssign, 'auto.js'),\n      'object.assign/implementation': path.join(\n        shimAssign,\n        'implementation.js'\n      ),\n      'object.assign$': path.join(shimAssign, 'index.js'),\n      'object.assign/polyfill': path.join(shimAssign, 'polyfill.js'),\n      'object.assign/shim': path.join(shimAssign, 'shim.js'),\n\n      // Replace: full URL polyfill with platform-based polyfill\n      url: require.resolve('native-url'),\n    }\n  )\n}\n\ntype ClientEntries = {\n  'main.js': string[]\n} & {\n  [key: string]: string\n}\n\nexport default async function getBaseWebpackConfig(\n  dir: string,\n  {\n    buildId,\n    config,\n    dev = false,\n    isServer = false,\n    pagesDir,\n    tracer,\n    target = 'server',\n    entrypoints,\n  }: {\n    buildId: string\n    config: any\n    dev?: boolean\n    isServer?: boolean\n    pagesDir: string\n    target?: string\n    tracer?: any\n    entrypoints: WebpackEntrypoints\n  }\n): Promise<webpack.Configuration> {\n  const productionBrowserSourceMaps =\n    config.experimental.productionBrowserSourceMaps && !isServer\n  let plugins: PluginMetaData[] = []\n  let babelPresetPlugins: { dir: string; config: any }[] = []\n\n  if (config.experimental.plugins) {\n    plugins = await collectPlugins(dir, config.env, config.plugins)\n    pluginLoaderOptions.plugins = plugins\n\n    for (const plugin of plugins) {\n      if (plugin.middleware.includes('babel-preset-build')) {\n        babelPresetPlugins.push({\n          dir: plugin.directory,\n          config: plugin.config,\n        })\n      }\n    }\n  }\n\n  const hasReactRefresh = dev && !isServer\n\n  const distDir = path.join(dir, config.distDir)\n  const defaultLoaders = {\n    babel: {\n      loader: 'next-babel-loader',\n      options: {\n        isServer,\n        distDir,\n        pagesDir,\n        cwd: dir,\n        cache: true,\n        babelPresetPlugins,\n        hasModern: !!config.experimental.modern,\n        development: dev,\n        hasReactRefresh,\n      },\n    },\n    // Backwards compat\n    hotSelfAccept: {\n      loader: 'noop-loader',\n    },\n  }\n\n  const babelIncludeRegexes: RegExp[] = [\n    /next[\\\\/]dist[\\\\/]next-server[\\\\/]lib/,\n    /next[\\\\/]dist[\\\\/]client/,\n    /next[\\\\/]dist[\\\\/]pages/,\n    /[\\\\/](strip-ansi|ansi-regex)[\\\\/]/,\n    ...(config.experimental.plugins\n      ? VALID_MIDDLEWARE.map((name) => new RegExp(`src(\\\\\\\\|/)${name}`))\n      : []),\n  ]\n\n  // Support for NODE_PATH\n  const nodePathList = (process.env.NODE_PATH || '')\n    .split(process.platform === 'win32' ? ';' : ':')\n    .filter((p) => !!p)\n\n  const isServerless = target === 'serverless'\n  const isServerlessTrace = target === 'experimental-serverless-trace'\n  // Intentionally not using isTargetLikeServerless helper\n  const isLikeServerless = isServerless || isServerlessTrace\n\n  const outputDir = isLikeServerless ? SERVERLESS_DIRECTORY : SERVER_DIRECTORY\n  const outputPath = path.join(distDir, isServer ? outputDir : '')\n  const totalPages = Object.keys(entrypoints).length\n  const clientEntries = !isServer\n    ? ({\n        // Backwards compatibility\n        'main.js': [],\n        [CLIENT_STATIC_FILES_RUNTIME_MAIN]:\n          `.${path.sep}` +\n          path.relative(\n            dir,\n            path.join(\n              NEXT_PROJECT_ROOT_DIST_CLIENT,\n              dev ? `next-dev.js` : 'next.js'\n            )\n          ),\n        [CLIENT_STATIC_FILES_RUNTIME_POLYFILLS]: path.join(\n          NEXT_PROJECT_ROOT_DIST_CLIENT,\n          'polyfills.js'\n        ),\n      } as ClientEntries)\n    : undefined\n\n  let typeScriptPath\n  try {\n    typeScriptPath = resolveRequest('typescript', `${dir}/`)\n  } catch (_) {}\n  const tsConfigPath = path.join(dir, 'tsconfig.json')\n  const useTypeScript = Boolean(\n    typeScriptPath && (await fileExists(tsConfigPath))\n  )\n  const ignoreTypeScriptErrors =\n    dev || Boolean(config.typescript?.ignoreBuildErrors)\n\n  let jsConfig\n  // jsconfig is a subset of tsconfig\n  if (useTypeScript) {\n    jsConfig = parseJsonFile(tsConfigPath)\n  }\n\n  const jsConfigPath = path.join(dir, 'jsconfig.json')\n  if (!useTypeScript && (await fileExists(jsConfigPath))) {\n    jsConfig = parseJsonFile(jsConfigPath)\n  }\n\n  let resolvedBaseUrl\n  if (jsConfig?.compilerOptions?.baseUrl) {\n    resolvedBaseUrl = path.resolve(dir, jsConfig.compilerOptions.baseUrl)\n  }\n\n  const resolveConfig = {\n    // Disable .mjs for node_modules bundling\n    extensions: isServer\n      ? [\n          '.js',\n          '.mjs',\n          ...(useTypeScript ? ['.tsx', '.ts'] : []),\n          '.jsx',\n          '.json',\n          '.wasm',\n        ]\n      : [\n          '.mjs',\n          '.js',\n          ...(useTypeScript ? ['.tsx', '.ts'] : []),\n          '.jsx',\n          '.json',\n          '.wasm',\n        ],\n    modules: [\n      'node_modules',\n      ...nodePathList, // Support for NODE_PATH environment variable\n    ],\n    alias: {\n      // These aliases make sure the wrapper module is not included in the bundles\n      // Which makes bundles slightly smaller, but also skips parsing a module that we know will result in this alias\n      'next/head': 'next/dist/next-server/lib/head.js',\n      'next/router': 'next/dist/client/router.js',\n      'next/config': 'next/dist/next-server/lib/runtime-config.js',\n      'next/dynamic': 'next/dist/next-server/lib/dynamic.js',\n      next: NEXT_PROJECT_ROOT,\n      [PAGES_DIR_ALIAS]: pagesDir,\n      [DOT_NEXT_ALIAS]: distDir,\n      ...getOptimizedAliases(isServer),\n    },\n    mainFields: isServer ? ['main', 'module'] : ['browser', 'module', 'main'],\n    plugins: isWebpack5\n      ? // webpack 5+ has the PnP resolver built-in by default:\n        []\n      : [PnpWebpackPlugin],\n  }\n\n  const webpackMode = dev ? 'development' : 'production'\n\n  const terserOptions: any = {\n    parse: {\n      ecma: 8,\n    },\n    compress: {\n      ecma: 5,\n      warnings: false,\n      // The following two options are known to break valid JavaScript code\n      comparisons: false,\n      inline: 2, // https://github.com/vercel/next.js/issues/7178#issuecomment-493048965\n    },\n    mangle: { safari10: true },\n    output: {\n      ecma: 5,\n      safari10: true,\n      comments: false,\n      // Fixes usage of Emoji and certain Regex\n      ascii_only: true,\n    },\n  }\n\n  const devtool = dev ? 'cheap-module-source-map' : false\n\n  const isModuleCSS = (module: { type: string }): boolean => {\n    return (\n      // mini-css-extract-plugin\n      module.type === `css/mini-extract` ||\n      // extract-css-chunks-webpack-plugin (old)\n      module.type === `css/extract-chunks` ||\n      // extract-css-chunks-webpack-plugin (new)\n      module.type === `css/extract-css-chunks`\n    )\n  }\n\n  // Contains various versions of the Webpack SplitChunksPlugin used in different build types\n  const splitChunksConfigs: {\n    [propName: string]: webpack.Options.SplitChunksOptions\n  } = {\n    dev: {\n      cacheGroups: {\n        default: false,\n        vendors: false,\n      },\n    },\n    prod: {\n      chunks: 'all',\n      cacheGroups: {\n        default: false,\n        vendors: false,\n        commons: {\n          name: 'commons',\n          chunks: 'all',\n          minChunks: totalPages > 2 ? totalPages * 0.5 : 2,\n        },\n        react: {\n          name: 'commons',\n          chunks: 'all',\n          test: /[\\\\/]node_modules[\\\\/](react|react-dom|scheduler|use-subscription)[\\\\/]/,\n        },\n      },\n    },\n    prodGranular: {\n      chunks: 'all',\n      cacheGroups: {\n        default: false,\n        vendors: false,\n        framework: {\n          chunks: 'all',\n          name: 'framework',\n          // This regex ignores nested copies of framework libraries so they're\n          // bundled with their issuer.\n          // https://github.com/vercel/next.js/pull/9012\n          test: /(?<!node_modules.*)[\\\\/]node_modules[\\\\/](react|react-dom|scheduler|prop-types|use-subscription)[\\\\/]/,\n          priority: 40,\n          // Don't let webpack eliminate this chunk (prevents this chunk from\n          // becoming a part of the commons chunk)\n          enforce: true,\n        },\n        lib: {\n          test(module: { size: Function; identifier: Function }): boolean {\n            return (\n              module.size() > 160000 &&\n              /node_modules[/\\\\]/.test(module.identifier())\n            )\n          },\n          name(module: {\n            type: string\n            libIdent?: Function\n            updateHash: (hash: crypto.Hash) => void\n          }): string {\n            const hash = crypto.createHash('sha1')\n            if (isModuleCSS(module)) {\n              module.updateHash(hash)\n            } else {\n              if (!module.libIdent) {\n                throw new Error(\n                  `Encountered unknown module type: ${module.type}. Please open an issue.`\n                )\n              }\n\n              hash.update(module.libIdent({ context: dir }))\n            }\n\n            return hash.digest('hex').substring(0, 8)\n          },\n          priority: 30,\n          minChunks: 1,\n          reuseExistingChunk: true,\n        },\n        commons: {\n          name: 'commons',\n          minChunks: totalPages,\n          priority: 20,\n        },\n        shared: {\n          name(module, chunks) {\n            return (\n              crypto\n                .createHash('sha1')\n                .update(\n                  chunks.reduce(\n                    (acc: string, chunk: webpack.compilation.Chunk) => {\n                      return acc + chunk.name\n                    },\n                    ''\n                  )\n                )\n                .digest('hex') + (isModuleCSS(module) ? '_CSS' : '')\n            )\n          },\n          priority: 10,\n          minChunks: 2,\n          reuseExistingChunk: true,\n        },\n      },\n      maxInitialRequests: 25,\n      minSize: 20000,\n    },\n  }\n\n  // Select appropriate SplitChunksPlugin config for this build\n  let splitChunksConfig: webpack.Options.SplitChunksOptions\n  if (dev) {\n    splitChunksConfig = splitChunksConfigs.dev\n  } else {\n    splitChunksConfig = config.experimental.granularChunks\n      ? splitChunksConfigs.prodGranular\n      : splitChunksConfigs.prod\n  }\n\n  const crossOrigin =\n    !config.crossOrigin && config.experimental.modern\n      ? 'anonymous'\n      : config.crossOrigin\n\n  let customAppFile: string | null = await findPageFile(\n    pagesDir,\n    '/_app',\n    config.pageExtensions\n  )\n  if (customAppFile) {\n    customAppFile = path.resolve(path.join(pagesDir, customAppFile))\n  }\n\n  const conformanceConfig = Object.assign(\n    {\n      ReactSyncScriptsConformanceCheck: {\n        enabled: true,\n      },\n      MinificationConformanceCheck: {\n        enabled: true,\n      },\n      DuplicatePolyfillsConformanceCheck: {\n        enabled: true,\n        BlockedAPIToBePolyfilled: Object.assign(\n          [],\n          ['fetch'],\n          config.conformance?.DuplicatePolyfillsConformanceCheck\n            ?.BlockedAPIToBePolyfilled || []\n        ),\n      },\n      GranularChunksConformanceCheck: {\n        enabled: true,\n      },\n    },\n    config.conformance\n  )\n  let webpackConfig: webpack.Configuration = {\n    externals: !isServer\n      ? // make sure importing \"next\" is handled gracefully for client\n        // bundles in case a user imported types and it wasn't removed\n        // TODO: should we warn/error for this instead?\n        ['next']\n      : !isServerless\n      ? [\n          (context, request, callback) => {\n            if (request === 'next') {\n              return callback(undefined, `commonjs ${request}`)\n            }\n\n            const notExternalModules = [\n              'next/app',\n              'next/document',\n              'next/link',\n              'next/error',\n              'string-hash',\n              'next/constants',\n            ]\n\n            if (notExternalModules.indexOf(request) !== -1) {\n              return callback()\n            }\n\n            // We need to externalize internal requests for files intended to\n            // not be bundled.\n\n            const isLocal: boolean =\n              request.startsWith('.') ||\n              // Always check for unix-style path, as webpack sometimes\n              // normalizes as posix.\n              path.posix.isAbsolute(request) ||\n              // When on Windows, we also want to check for Windows-specific\n              // absolute paths.\n              (process.platform === 'win32' && path.win32.isAbsolute(request))\n            const isLikelyNextExternal =\n              isLocal && /[/\\\\]next-server[/\\\\]/.test(request)\n\n            // Relative requires don't need custom resolution, because they\n            // are relative to requests we've already resolved here.\n            // Absolute requires (require('/foo')) are extremely uncommon, but\n            // also have no need for customization as they're already resolved.\n            if (isLocal && !isLikelyNextExternal) {\n              return callback()\n            }\n\n            // Resolve the import with the webpack provided context, this\n            // ensures we're resolving the correct version when multiple\n            // exist.\n            let res: string\n            try {\n              res = resolveRequest(request, `${context}/`)\n            } catch (err) {\n              // If the request cannot be resolved, we need to tell webpack to\n              // \"bundle\" it so that webpack shows an error (that it cannot be\n              // resolved).\n              return callback()\n            }\n\n            // Same as above, if the request cannot be resolved we need to have\n            // webpack \"bundle\" it so it surfaces the not found error.\n            if (!res) {\n              return callback()\n            }\n\n            let isNextExternal: boolean = false\n            if (isLocal) {\n              // we need to process next-server/lib/router/router so that\n              // the DefinePlugin can inject process.env values\n              isNextExternal = /next[/\\\\]dist[/\\\\]next-server[/\\\\](?!lib[/\\\\]router[/\\\\]router)/.test(\n                res\n              )\n\n              if (!isNextExternal) {\n                return callback()\n              }\n            }\n\n            // `isNextExternal` special cases Next.js' internal requires that\n            // should not be bundled. We need to skip the base resolve routine\n            // to prevent it from being bundled (assumes Next.js version cannot\n            // mismatch).\n            if (!isNextExternal) {\n              // Bundled Node.js code is relocated without its node_modules tree.\n              // This means we need to make sure its request resolves to the same\n              // package that'll be available at runtime. If it's not identical,\n              // we need to bundle the code (even if it _should_ be external).\n              let baseRes: string | null\n              try {\n                baseRes = resolveRequest(request, `${dir}/`)\n              } catch (err) {\n                baseRes = null\n              }\n\n              // Same as above: if the package, when required from the root,\n              // would be different from what the real resolution would use, we\n              // cannot externalize it.\n              if (baseRes !== res) {\n                return callback()\n              }\n            }\n\n            // Default pages have to be transpiled\n            if (\n              !res.match(/next[/\\\\]dist[/\\\\]next-server[/\\\\]/) &&\n              (res.match(/[/\\\\]next[/\\\\]dist[/\\\\]/) ||\n                // This is the @babel/plugin-transform-runtime \"helpers: true\" option\n                res.match(/node_modules[/\\\\]@babel[/\\\\]runtime[/\\\\]/))\n            ) {\n              return callback()\n            }\n\n            // Webpack itself has to be compiled because it doesn't always use module relative paths\n            if (\n              res.match(/node_modules[/\\\\]webpack/) ||\n              res.match(/node_modules[/\\\\]css-loader/)\n            ) {\n              return callback()\n            }\n\n            // Anything else that is standard JavaScript within `node_modules`\n            // can be externalized.\n            if (isNextExternal || res.match(/node_modules[/\\\\].*\\.js$/)) {\n              const externalRequest = isNextExternal\n                ? // Generate Next.js external import\n                  path.posix.join(\n                    'next',\n                    'dist',\n                    path\n                      .relative(\n                        // Root of Next.js package:\n                        path.join(__dirname, '..'),\n                        res\n                      )\n                      // Windows path normalization\n                      .replace(/\\\\/g, '/')\n                  )\n                : request\n\n              return callback(undefined, `commonjs ${externalRequest}`)\n            }\n\n            // Default behavior: bundle the code!\n            callback()\n          },\n        ]\n      : [\n          // When the 'serverless' target is used all node_modules will be compiled into the output bundles\n          // So that the 'serverless' bundles have 0 runtime dependencies\n          '@ampproject/toolbox-optimizer', // except this one\n        ],\n    optimization: {\n      checkWasmTypes: false,\n      nodeEnv: false,\n      splitChunks: isServer ? false : splitChunksConfig,\n      runtimeChunk: isServer\n        ? undefined\n        : { name: CLIENT_STATIC_FILES_RUNTIME_WEBPACK },\n      minimize: !(dev || isServer),\n      minimizer: [\n        // Minify JavaScript\n        new TerserPlugin({\n          extractComments: false,\n          cache: path.join(distDir, 'cache', 'next-minifier'),\n          parallel: config.experimental.cpus || true,\n          terserOptions,\n        }),\n        // Minify CSS\n        new CssMinimizerPlugin({\n          postcssOptions: {\n            map: {\n              // `inline: false` generates the source map in a separate file.\n              // Otherwise, the CSS file is needlessly large.\n              inline: false,\n              // `annotation: false` skips appending the `sourceMappingURL`\n              // to the end of the CSS file. Webpack already handles this.\n              annotation: false,\n            },\n          },\n        }),\n      ],\n    },\n    context: dir,\n    node: {\n      setImmediate: false,\n    },\n    // Kept as function to be backwards compatible\n    entry: async () => {\n      return {\n        ...(clientEntries ? clientEntries : {}),\n        ...entrypoints,\n        ...(isServer\n          ? {\n              'init-server.js': 'next-plugin-loader?middleware=on-init-server!',\n              'on-error-server.js':\n                'next-plugin-loader?middleware=on-error-server!',\n            }\n          : {}),\n      }\n    },\n    output: {\n      path: outputPath,\n      filename: ({ chunk }: { chunk: { name: string } }) => {\n        // Use `[name]-[contenthash].js` in production\n        if (\n          !dev &&\n          (chunk.name === CLIENT_STATIC_FILES_RUNTIME_MAIN ||\n            chunk.name === CLIENT_STATIC_FILES_RUNTIME_WEBPACK ||\n            chunk.name === CLIENT_STATIC_FILES_RUNTIME_POLYFILLS)\n        ) {\n          return chunk.name.replace(/\\.js$/, '-[contenthash].js')\n        }\n        return '[name]'\n      },\n      libraryTarget: isServer ? 'commonjs2' : 'var',\n      hotUpdateChunkFilename: isWebpack5\n        ? 'static/webpack/[id].[fullhash].hot-update.js'\n        : 'static/webpack/[id].[hash].hot-update.js',\n      hotUpdateMainFilename: isWebpack5\n        ? 'static/webpack/[fullhash].hot-update.json'\n        : 'static/webpack/[hash].hot-update.json',\n      // This saves chunks with the name given via `import()`\n      chunkFilename: isServer\n        ? `${dev ? '[name]' : '[name].[contenthash]'}.js`\n        : `static/chunks/${dev ? '[name]' : '[name].[contenthash]'}.js`,\n      strictModuleExceptionHandling: true,\n      crossOriginLoading: crossOrigin,\n      futureEmitAssets: !dev,\n      webassemblyModuleFilename: 'static/wasm/[modulehash].wasm',\n    },\n    performance: false,\n    resolve: resolveConfig,\n    resolveLoader: {\n      // The loaders Next.js provides\n      alias: [\n        'emit-file-loader',\n        'error-loader',\n        'next-babel-loader',\n        'next-client-pages-loader',\n        'next-data-loader',\n        'next-serverless-loader',\n        'noop-loader',\n        'next-plugin-loader',\n      ].reduce((alias, loader) => {\n        // using multiple aliases to replace `resolveLoader.modules`\n        alias[loader] = path.join(__dirname, 'webpack', 'loaders', loader)\n\n        return alias\n      }, {} as Record<string, string>),\n      modules: [\n        'node_modules',\n        ...nodePathList, // Support for NODE_PATH environment variable\n      ],\n      plugins: [PnpWebpackPlugin],\n    },\n    module: {\n      rules: [\n        {\n          test: /\\.(tsx|ts|js|mjs|jsx)$/,\n          include: [dir, ...babelIncludeRegexes],\n          exclude: (path: string) => {\n            if (babelIncludeRegexes.some((r) => r.test(path))) {\n              return false\n            }\n            return /node_modules/.test(path)\n          },\n          use: config.experimental.babelMultiThread\n            ? [\n                // Move Babel transpilation into a thread pool (2 workers, unlimited batch size).\n                // Applying a cache to the off-thread work avoids paying transfer costs for unchanged modules.\n                {\n                  loader: 'next/dist/compiled/cache-loader',\n                  options: {\n                    cacheContext: dir,\n                    cacheDirectory: path.join(dir, '.next', 'cache', 'webpack'),\n                    cacheIdentifier: `webpack${isServer ? '-server' : ''}${\n                      config.experimental.modern ? '-hasmodern' : ''\n                    }`,\n                  },\n                },\n                {\n                  loader: require.resolve('next/dist/compiled/thread-loader'),\n                  options: {\n                    workers: 2,\n                    workerParallelJobs: Infinity,\n                  },\n                },\n                hasReactRefresh\n                  ? require.resolve('@next/react-refresh-utils/loader')\n                  : '',\n                defaultLoaders.babel,\n              ].filter(Boolean)\n            : hasReactRefresh\n            ? [\n                require.resolve('@next/react-refresh-utils/loader'),\n                defaultLoaders.babel,\n              ]\n            : defaultLoaders.babel,\n        },\n      ].filter(Boolean),\n    },\n    plugins: [\n      hasReactRefresh && new ReactRefreshWebpackPlugin(),\n      // This plugin makes sure `output.filename` is used for entry chunks\n      new ChunkNamesPlugin(),\n      new webpack.DefinePlugin({\n        ...Object.keys(process.env).reduce(\n          (prev: { [key: string]: string }, key: string) => {\n            if (key.startsWith('NEXT_PUBLIC_')) {\n              prev[`process.env.${key}`] = JSON.stringify(process.env[key]!)\n            }\n            return prev\n          },\n          {}\n        ),\n        ...Object.keys(config.env).reduce((acc, key) => {\n          if (/^(?:NODE_.+)|^(?:__.+)$/i.test(key)) {\n            throw new Error(\n              `The key \"${key}\" under \"env\" in next.config.js is not allowed. https://err.sh/vercel/next.js/env-key-not-allowed`\n            )\n          }\n\n          return {\n            ...acc,\n            [`process.env.${key}`]: JSON.stringify(config.env[key]),\n          }\n        }, {}),\n        'process.env.NODE_ENV': JSON.stringify(webpackMode),\n        'process.crossOrigin': JSON.stringify(crossOrigin),\n        'process.browser': JSON.stringify(!isServer),\n        'process.env.__NEXT_TEST_MODE': JSON.stringify(\n          process.env.__NEXT_TEST_MODE\n        ),\n        // This is used in client/dev-error-overlay/hot-dev-client.js to replace the dist directory\n        ...(dev && !isServer\n          ? {\n              'process.env.__NEXT_DIST_DIR': JSON.stringify(distDir),\n            }\n          : {}),\n        'process.env.__NEXT_EXPORT_TRAILING_SLASH': JSON.stringify(\n          config.exportTrailingSlash\n        ),\n        'process.env.__NEXT_MODERN_BUILD': JSON.stringify(\n          config.experimental.modern && !dev\n        ),\n        'process.env.__NEXT_GRANULAR_CHUNKS': JSON.stringify(\n          config.experimental.granularChunks && !dev\n        ),\n        'process.env.__NEXT_BUILD_INDICATOR': JSON.stringify(\n          config.devIndicators.buildActivity\n        ),\n        'process.env.__NEXT_PRERENDER_INDICATOR': JSON.stringify(\n          config.devIndicators.autoPrerender\n        ),\n        'process.env.__NEXT_PLUGINS': JSON.stringify(\n          config.experimental.plugins\n        ),\n        'process.env.__NEXT_STRICT_MODE': JSON.stringify(\n          config.reactStrictMode\n        ),\n        'process.env.__NEXT_REACT_MODE': JSON.stringify(\n          config.experimental.reactMode\n        ),\n        'process.env.__NEXT_ROUTER_BASEPATH': JSON.stringify(\n          config.experimental.basePath\n        ),\n        ...(isServer\n          ? {\n              // Fix bad-actors in the npm ecosystem (e.g. `node-formidable`)\n              // This is typically found in unmaintained modules from the\n              // pre-webpack era (common in server-side code)\n              'global.GENTLY': JSON.stringify(false),\n            }\n          : undefined),\n        // stub process.env with proxy to warn a missing value is\n        // being accessed in development mode\n        ...(config.experimental.pageEnv && process.env.NODE_ENV !== 'production'\n          ? {\n              'process.env': `\n            new Proxy(${isServer ? 'process.env' : '{}'}, {\n              get(target, prop) {\n                if (typeof target[prop] === 'undefined') {\n                  console.warn(\\`An environment variable (\\${prop}) that was not provided in the environment was accessed.\\nSee more info here: https://err.sh/next.js/missing-env-value\\`)\n                }\n                return target[prop]\n              }\n            })\n          `,\n            }\n          : {}),\n      }),\n      !isServer &&\n        new ReactLoadablePlugin({\n          filename: REACT_LOADABLE_MANIFEST,\n        }),\n      !isServer && new DropClientPage(),\n      // Moment.js is an extremely popular library that bundles large locale files\n      // by default due to how Webpack interprets its code. This is a practical\n      // solution that requires the user to opt into importing specific locales.\n      // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n      config.future.excludeDefaultMomentLocales &&\n        new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),\n      ...(dev\n        ? (() => {\n            // Even though require.cache is server only we have to clear assets from both compilations\n            // This is because the client compilation generates the build manifest that's used on the server side\n            const {\n              NextJsRequireCacheHotReloader,\n            } = require('./webpack/plugins/nextjs-require-cache-hot-reloader')\n            const {\n              UnlinkRemovedPagesPlugin,\n            } = require('./webpack/plugins/unlink-removed-pages-plugin')\n            const devPlugins = [\n              new UnlinkRemovedPagesPlugin(),\n              new webpack.NoEmitOnErrorsPlugin(),\n              new NextJsRequireCacheHotReloader(),\n            ]\n\n            // Webpack 5 has the ability to cache packages persistently, so we\n            // do not need this DLL plugin:\n            if (!isServer && !isWebpack5) {\n              const AutoDllPlugin = require('next/dist/compiled/autodll-webpack-plugin')(\n                distDir\n              )\n              devPlugins.push(\n                new AutoDllPlugin({\n                  filename: '[name]_[hash].js',\n                  path: './static/development/dll',\n                  context: dir,\n                  entry: {\n                    dll: ['react', 'react-dom'],\n                  },\n                  config: {\n                    devtool,\n                    mode: webpackMode,\n                    resolve: resolveConfig,\n                  },\n                })\n              )\n              devPlugins.push(new webpack.HotModuleReplacementPlugin())\n            }\n\n            return devPlugins\n          })()\n        : []),\n      // Webpack 5 no longer requires this plugin in production:\n      !isWebpack5 && !dev && new webpack.HashedModuleIdsPlugin(),\n      !dev &&\n        new webpack.IgnorePlugin({\n          resourceRegExp: /react-is/,\n          contextRegExp: /(next-server|next)[\\\\/]dist[\\\\/]/,\n        }),\n      isServerless && isServer && new ServerlessPlugin(),\n      isServer && new PagesManifestPlugin(isLikeServerless),\n      target === 'server' &&\n        isServer &&\n        new NextJsSSRModuleCachePlugin({ outputPath }),\n      isServer && new NextJsSsrImportPlugin(),\n      !isServer &&\n        new BuildManifestPlugin({\n          buildId,\n          clientManifest: config.experimental.granularChunks,\n          modern: config.experimental.modern,\n        }),\n      tracer &&\n        new ProfilingPlugin({\n          tracer,\n        }),\n      !dev &&\n        !isServer &&\n        useTypeScript &&\n        !ignoreTypeScriptErrors &&\n        new ForkTsCheckerWebpackPlugin(\n          PnpWebpackPlugin.forkTsCheckerOptions({\n            typescript: typeScriptPath,\n            async: false,\n            useTypescriptIncrementalApi: true,\n            checkSyntacticErrors: true,\n            tsconfig: tsConfigPath,\n            reportFiles: ['**', '!**/__tests__/**', '!**/?(*.)(spec|test).*'],\n            compilerOptions: { isolatedModules: true, noEmit: true },\n            silent: true,\n            formatter: 'codeframe',\n          })\n        ),\n      config.experimental.modern &&\n        !isServer &&\n        !dev &&\n        new NextEsmPlugin({\n          excludedPlugins: ['ForkTsCheckerWebpackPlugin'],\n          filename: (getFileName: Function | string) => (...args: any[]) => {\n            const name =\n              typeof getFileName === 'function'\n                ? getFileName(...args)\n                : getFileName\n\n            return name.includes('.js')\n              ? name.replace(/\\.js$/, '.module.js')\n              : escapePathVariables(\n                  args[0].chunk.name.replace(/\\.js$/, '.module.js')\n                )\n          },\n          chunkFilename: (inputChunkName: string) =>\n            inputChunkName.replace(/\\.js$/, '.module.js'),\n        }),\n      config.experimental.conformance &&\n        !dev &&\n        new WebpackConformancePlugin({\n          tests: [\n            !isServer &&\n              conformanceConfig.MinificationConformanceCheck.enabled &&\n              new MinificationConformanceCheck(),\n            conformanceConfig.ReactSyncScriptsConformanceCheck.enabled &&\n              new ReactSyncScriptsConformanceCheck({\n                AllowedSources:\n                  conformanceConfig.ReactSyncScriptsConformanceCheck\n                    .allowedSources || [],\n              }),\n            !isServer &&\n              conformanceConfig.DuplicatePolyfillsConformanceCheck.enabled &&\n              new DuplicatePolyfillsConformanceCheck({\n                BlockedAPIToBePolyfilled:\n                  conformanceConfig.DuplicatePolyfillsConformanceCheck\n                    .BlockedAPIToBePolyfilled,\n              }),\n            !isServer &&\n              config.experimental.granularChunks &&\n              conformanceConfig.GranularChunksConformanceCheck.enabled &&\n              new GranularChunksConformanceCheck(\n                splitChunksConfigs.prodGranular\n              ),\n          ].filter(Boolean),\n        }),\n      new WellKnownErrorsPlugin(),\n    ].filter((Boolean as any) as ExcludesFalse),\n  }\n\n  // Support tsconfig and jsconfig baseUrl\n  if (resolvedBaseUrl) {\n    webpackConfig.resolve?.modules?.push(resolvedBaseUrl)\n  }\n\n  if (jsConfig?.compilerOptions?.paths && resolvedBaseUrl) {\n    webpackConfig.resolve?.plugins?.unshift(\n      new JsConfigPathsPlugin(jsConfig.compilerOptions.paths, resolvedBaseUrl)\n    )\n  }\n\n  if (isWebpack5) {\n    // On by default:\n    delete webpackConfig.output?.futureEmitAssets\n    // No longer polyfills Node.js modules:\n    if (webpackConfig.node) delete webpackConfig.node.setImmediate\n  }\n\n  webpackConfig = await buildConfiguration(webpackConfig, {\n    rootDirectory: dir,\n    customAppFile,\n    isDevelopment: dev,\n    isServer,\n    assetPrefix: config.assetPrefix || '',\n    sassOptions: config.sassOptions,\n    productionBrowserSourceMaps,\n  })\n\n  if (typeof config.webpack === 'function') {\n    webpackConfig = config.webpack(webpackConfig, {\n      dir,\n      dev,\n      isServer,\n      buildId,\n      config,\n      defaultLoaders,\n      totalPages,\n      webpack,\n    })\n\n    if (typeof (webpackConfig as any).then === 'function') {\n      console.warn(\n        '> Promise returned in next config. https://err.sh/vercel/next.js/promise-in-next-config'\n      )\n    }\n  }\n\n  function canMatchCss(rule: webpack.RuleSetCondition | undefined): boolean {\n    if (!rule) {\n      return false\n    }\n\n    const fileNames = [\n      '/tmp/test.css',\n      '/tmp/test.scss',\n      '/tmp/test.sass',\n      '/tmp/test.less',\n      '/tmp/test.styl',\n    ]\n\n    if (rule instanceof RegExp && fileNames.some((input) => rule.test(input))) {\n      return true\n    }\n\n    if (typeof rule === 'function') {\n      if (\n        fileNames.some((input) => {\n          try {\n            if (rule(input)) {\n              return true\n            }\n          } catch (_) {}\n          return false\n        })\n      ) {\n        return true\n      }\n    }\n\n    if (Array.isArray(rule) && rule.some(canMatchCss)) {\n      return true\n    }\n\n    return false\n  }\n\n  const hasUserCssConfig =\n    webpackConfig.module?.rules.some(\n      (rule) => canMatchCss(rule.test) || canMatchCss(rule.include)\n    ) ?? false\n\n  if (hasUserCssConfig) {\n    // only show warning for one build\n    if (isServer) {\n      console.warn(\n        chalk.yellow.bold('Warning: ') +\n          chalk.bold(\n            'Built-in CSS support is being disabled due to custom CSS configuration being detected.\\n'\n          ) +\n          'See here for more info: https://err.sh/next.js/built-in-css-disabled\\n'\n      )\n    }\n\n    if (webpackConfig.module?.rules.length) {\n      // Remove default CSS Loader\n      webpackConfig.module.rules = webpackConfig.module.rules.filter(\n        (r) =>\n          !(\n            typeof r.oneOf?.[0]?.options === 'object' &&\n            r.oneOf[0].options.__next_css_remove === true\n          )\n      )\n    }\n    if (webpackConfig.plugins?.length) {\n      // Disable CSS Extraction Plugin\n      webpackConfig.plugins = webpackConfig.plugins.filter(\n        (p) => (p as any).__next_css_remove !== true\n      )\n    }\n    if (webpackConfig.optimization?.minimizer?.length) {\n      // Disable CSS Minifier\n      webpackConfig.optimization.minimizer = webpackConfig.optimization.minimizer.filter(\n        (e) => (e as any).__next_css_remove !== true\n      )\n    }\n  } else {\n    await __overrideCssConfiguration(dir, !dev, webpackConfig)\n  }\n\n  // check if using @zeit/next-typescript and show warning\n  if (\n    isServer &&\n    webpackConfig.module &&\n    Array.isArray(webpackConfig.module.rules)\n  ) {\n    let foundTsRule = false\n\n    webpackConfig.module.rules = webpackConfig.module.rules.filter(\n      (rule): boolean => {\n        if (!(rule.test instanceof RegExp)) return true\n        if ('noop.ts'.match(rule.test) && !'noop.js'.match(rule.test)) {\n          // remove if it matches @zeit/next-typescript\n          foundTsRule = rule.use === defaultLoaders.babel\n          return !foundTsRule\n        }\n        return true\n      }\n    )\n\n    if (foundTsRule) {\n      console.warn(\n        '\\n@zeit/next-typescript is no longer needed since Next.js has built-in support for TypeScript now. Please remove it from your next.config.js and your .babelrc\\n'\n      )\n    }\n  }\n\n  // Patch `@zeit/next-sass`, `@zeit/next-less`, `@zeit/next-stylus` for compatibility\n  if (webpackConfig.module && Array.isArray(webpackConfig.module.rules)) {\n    ;[].forEach.call(webpackConfig.module.rules, function (\n      rule: webpack.RuleSetRule\n    ) {\n      if (!(rule.test instanceof RegExp && Array.isArray(rule.use))) {\n        return\n      }\n\n      const isSass =\n        rule.test.source === '\\\\.scss$' || rule.test.source === '\\\\.sass$'\n      const isLess = rule.test.source === '\\\\.less$'\n      const isCss = rule.test.source === '\\\\.css$'\n      const isStylus = rule.test.source === '\\\\.styl$'\n\n      // Check if the rule we're iterating over applies to Sass, Less, or CSS\n      if (!(isSass || isLess || isCss || isStylus)) {\n        return\n      }\n\n      ;[].forEach.call(rule.use, function (use: webpack.RuleSetUseItem) {\n        if (\n          !(\n            use &&\n            typeof use === 'object' &&\n            // Identify use statements only pertaining to `css-loader`\n            (use.loader === 'css-loader' ||\n              use.loader === 'css-loader/locals') &&\n            use.options &&\n            typeof use.options === 'object' &&\n            // The `minimize` property is a good heuristic that we need to\n            // perform this hack. The `minimize` property was only valid on\n            // old `css-loader` versions. Custom setups (that aren't next-sass,\n            // next-less or next-stylus) likely have the newer version.\n            // We still handle this gracefully below.\n            (Object.prototype.hasOwnProperty.call(use.options, 'minimize') ||\n              Object.prototype.hasOwnProperty.call(\n                use.options,\n                'exportOnlyLocals'\n              ))\n          )\n        ) {\n          return\n        }\n\n        // Try to monkey patch within a try-catch. We shouldn't fail the build\n        // if we cannot pull this off.\n        // The user may not even be using the `next-sass` or `next-less` or\n        // `next-stylus` plugins.\n        // If it does work, great!\n        try {\n          // Resolve the version of `@zeit/next-css` as depended on by the Sass,\n          // Less or Stylus plugin.\n          const correctNextCss = resolveRequest(\n            '@zeit/next-css',\n            isCss\n              ? // Resolve `@zeit/next-css` from the base directory\n                `${dir}/`\n              : // Else, resolve it from the specific plugins\n                require.resolve(\n                  isSass\n                    ? '@zeit/next-sass'\n                    : isLess\n                    ? '@zeit/next-less'\n                    : isStylus\n                    ? '@zeit/next-stylus'\n                    : 'next'\n                )\n          )\n\n          // If we found `@zeit/next-css` ...\n          if (correctNextCss) {\n            // ... resolve the version of `css-loader` shipped with that\n            // package instead of whichever was hoisted highest in your\n            // `node_modules` tree.\n            const correctCssLoader = resolveRequest(use.loader, correctNextCss)\n            if (correctCssLoader) {\n              // We saved the user from a failed build!\n              use.loader = correctCssLoader\n            }\n          }\n        } catch (_) {\n          // The error is not required to be handled.\n        }\n      })\n    })\n  }\n\n  // Backwards compat for `main.js` entry key\n  const originalEntry: any = webpackConfig.entry\n  if (typeof originalEntry !== 'undefined') {\n    webpackConfig.entry = async () => {\n      const entry: WebpackEntrypoints =\n        typeof originalEntry === 'function'\n          ? await originalEntry()\n          : originalEntry\n      // Server compilation doesn't have main.js\n      if (clientEntries && entry['main.js'] && entry['main.js'].length > 0) {\n        const originalFile = clientEntries[CLIENT_STATIC_FILES_RUNTIME_MAIN]\n        entry[CLIENT_STATIC_FILES_RUNTIME_MAIN] = [\n          ...entry['main.js'],\n          originalFile,\n        ]\n      }\n      delete entry['main.js']\n\n      return entry\n    }\n  }\n\n  if (!dev) {\n    // entry is always a function\n    webpackConfig.entry = await (webpackConfig.entry as webpack.EntryFunc)()\n  }\n\n  // In webpack 5, the 'var' libraryTarget output requires a name.\n  // TODO: this should be revisited as 'var' was only used to not have the\n  // initial variable exposed. In webpack 4, not setting the library option\n  // would result in the bundle being a self-executing function without the\n  // variable.\n  if (isWebpack5 && !isServer) {\n    webpackConfig.output!.library = webpackConfig.output?.library\n      ? webpackConfig.output.library\n      : 'INTERNAL_NEXT_APP'\n  }\n\n  return webpackConfig\n}\n"]}