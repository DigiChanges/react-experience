{"version":3,"sources":["../../client/link.tsx"],"names":["isLocal","href","url","origin","host","protocol","memoizedFormatUrl","formatFunc","lastHref","lastAs","lastResult","as","result","formatUrl","observer","listeners","Map","IntersectionObserver","window","prefetched","getObserver","undefined","entries","forEach","entry","has","target","cb","get","isIntersecting","intersectionRatio","unobserve","delete","rootMargin","listenToIntersections","el","observe","set","err","console","error","Link","Component","constructor","props","p","cleanUpListeners","formatUrls","asHref","linkClicked","e","nodeName","currentTarget","metaKey","ctrlKey","shiftKey","nativeEvent","which","pathname","location","preventDefault","scroll","indexOf","Router","replace","shallow","then","success","scrollTo","document","body","focus","process","env","NODE_ENV","prefetch","warn","componentWillUnmount","getPaths","parsedHref","parsedAs","resolvedHref","handleRef","ref","tagName","isPrefetched","join","options","paths","catch","render","children","child","Children","only","current","onMouseEnter","priority","onClick","defaultPrevented","passHref","type","__NEXT_EXPORT_TRAILING_SLASH","rewriteUrlForNextExport","require","__NEXT_DATA__","nextExport","React","cloneElement","PropTypes","exact","propTypes","oneOfType","string","object","isRequired","bool","element","propName","value"],"mappings":"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","sourcesContent":["declare const __NEXT_DATA__: any\n\nimport React, { Children, Component } from 'react'\nimport { parse, resolve, UrlObject } from 'url'\nimport { PrefetchOptions } from '../next-server/lib/router/router'\nimport {\n  execOnce,\n  formatWithValidation,\n  getLocationOrigin,\n} from '../next-server/lib/utils'\nimport Router from './router'\nimport { addBasePath } from '../next-server/lib/router/router'\n\nfunction isLocal(href: string): boolean {\n  const url = parse(href, false, true)\n  const origin = parse(getLocationOrigin(), false, true)\n\n  return (\n    !url.host || (url.protocol === origin.protocol && url.host === origin.host)\n  )\n}\n\ntype Url = string | UrlObject\ntype FormatResult = { href: string; as?: string }\n\nfunction memoizedFormatUrl(formatFunc: (href: Url, as?: Url) => FormatResult) {\n  let lastHref: null | Url = null\n  let lastAs: undefined | null | Url = null\n  let lastResult: null | FormatResult = null\n  return (href: Url, as?: Url) => {\n    if (lastResult && href === lastHref && as === lastAs) {\n      return lastResult\n    }\n\n    const result = formatFunc(href, as)\n    lastHref = href\n    lastAs = as\n    lastResult = result\n    return result\n  }\n}\n\nfunction formatUrl(url: Url): string {\n  return url && typeof url === 'object' ? formatWithValidation(url) : url\n}\n\nexport type LinkProps = {\n  href: Url\n  as?: Url\n  replace?: boolean\n  scroll?: boolean\n  shallow?: boolean\n  passHref?: boolean\n  prefetch?: boolean\n}\n\nlet observer: IntersectionObserver\nconst listeners = new Map<Element, () => void>()\nconst IntersectionObserver =\n  typeof window !== 'undefined' ? window.IntersectionObserver : null\nconst prefetched: { [cacheKey: string]: boolean } = {}\n\nfunction getObserver(): IntersectionObserver | undefined {\n  // Return shared instance of IntersectionObserver if already created\n  if (observer) {\n    return observer\n  }\n\n  // Only create shared IntersectionObserver if supported in browser\n  if (!IntersectionObserver) {\n    return undefined\n  }\n\n  return (observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (!listeners.has(entry.target)) {\n          return\n        }\n\n        const cb = listeners.get(entry.target)!\n        if (entry.isIntersecting || entry.intersectionRatio > 0) {\n          observer.unobserve(entry.target)\n          listeners.delete(entry.target)\n          cb()\n        }\n      })\n    },\n    { rootMargin: '200px' }\n  ))\n}\n\nconst listenToIntersections = (el: Element, cb: () => void) => {\n  const observer = getObserver()\n  if (!observer) {\n    return () => {}\n  }\n\n  observer.observe(el)\n  listeners.set(el, cb)\n  return () => {\n    try {\n      observer.unobserve(el)\n    } catch (err) {\n      console.error(err)\n    }\n    listeners.delete(el)\n  }\n}\n\nclass Link extends Component<LinkProps> {\n  p: boolean\n\n  constructor(props: LinkProps) {\n    super(props)\n    if (process.env.NODE_ENV !== 'production') {\n      if (props.prefetch) {\n        console.warn(\n          'Next.js auto-prefetches automatically based on viewport. The prefetch attribute is no longer needed. More: https://err.sh/vercel/next.js/prefetch-true-deprecated'\n        )\n      }\n    }\n    this.p = props.prefetch !== false\n  }\n\n  cleanUpListeners = () => {}\n\n  componentWillUnmount(): void {\n    this.cleanUpListeners()\n  }\n\n  getPaths(): string[] {\n    const { pathname } = window.location\n    const { href: parsedHref, as: parsedAs } = this.formatUrls(\n      this.props.href,\n      this.props.as\n    )\n    const resolvedHref = resolve(pathname, parsedHref)\n    return [resolvedHref, parsedAs ? resolve(pathname, parsedAs) : resolvedHref]\n  }\n\n  handleRef(ref: Element): void {\n    if (this.p && IntersectionObserver && ref && ref.tagName) {\n      this.cleanUpListeners()\n\n      const isPrefetched =\n        prefetched[\n          this.getPaths().join(\n            // Join on an invalid URI character\n            '%'\n          )\n        ]\n      if (!isPrefetched) {\n        this.cleanUpListeners = listenToIntersections(ref, () => {\n          this.prefetch()\n        })\n      }\n    }\n  }\n\n  // The function is memoized so that no extra lifecycles are needed\n  // as per https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html\n  formatUrls = memoizedFormatUrl((href, asHref) => {\n    return {\n      href: addBasePath(formatUrl(href)),\n      as: asHref ? addBasePath(formatUrl(asHref)) : asHref,\n    }\n  })\n\n  linkClicked = (e: React.MouseEvent): void => {\n    const { nodeName, target } = e.currentTarget as HTMLAnchorElement\n    if (\n      nodeName === 'A' &&\n      ((target && target !== '_self') ||\n        e.metaKey ||\n        e.ctrlKey ||\n        e.shiftKey ||\n        (e.nativeEvent && e.nativeEvent.which === 2))\n    ) {\n      // ignore click for new tab / new window behavior\n      return\n    }\n\n    let { href, as } = this.formatUrls(this.props.href, this.props.as)\n\n    if (!isLocal(href)) {\n      // ignore click if it's outside our scope (e.g. https://google.com)\n      return\n    }\n\n    const { pathname } = window.location\n    href = resolve(pathname, href)\n    as = as ? resolve(pathname, as) : href\n\n    e.preventDefault()\n\n    //  avoid scroll for urls with anchor refs\n    let { scroll } = this.props\n    if (scroll == null) {\n      scroll = as.indexOf('#') < 0\n    }\n\n    // replace state instead of push if prop is present\n    Router[this.props.replace ? 'replace' : 'push'](href, as, {\n      shallow: this.props.shallow,\n    }).then((success: boolean) => {\n      if (!success) return\n      if (scroll) {\n        window.scrollTo(0, 0)\n        document.body.focus()\n      }\n    })\n  }\n\n  prefetch(options?: PrefetchOptions): void {\n    if (!this.p || typeof window === 'undefined') return\n    // Prefetch the JSON page if asked (only in the client)\n    const paths = this.getPaths()\n    // We need to handle a prefetch error here since we may be\n    // loading with priority which can reject but we don't\n    // want to force navigation since this is only a prefetch\n    Router.prefetch(paths[/* href */ 0], paths[/* asPath */ 1], options).catch(\n      (err) => {\n        if (process.env.NODE_ENV !== 'production') {\n          // rethrow to show invalid URL errors\n          throw err\n        }\n      }\n    )\n    prefetched[\n      paths.join(\n        // Join on an invalid URI character\n        '%'\n      )\n    ] = true\n  }\n\n  render() {\n    let { children } = this.props\n    const { href, as } = this.formatUrls(this.props.href, this.props.as)\n    // Deprecated. Warning shown by propType check. If the children provided is a string (<Link>example</Link>) we wrap it in an <a> tag\n    if (typeof children === 'string') {\n      children = <a>{children}</a>\n    }\n\n    // This will return the first child, if multiple are provided it will throw an error\n    const child: any = Children.only(children)\n    const props: {\n      onMouseEnter: React.MouseEventHandler\n      onClick: React.MouseEventHandler\n      href?: string\n      ref?: any\n    } = {\n      ref: (el: any) => {\n        this.handleRef(el)\n\n        if (child && typeof child === 'object' && child.ref) {\n          if (typeof child.ref === 'function') child.ref(el)\n          else if (typeof child.ref === 'object') {\n            child.ref.current = el\n          }\n        }\n      },\n      onMouseEnter: (e: React.MouseEvent) => {\n        if (child.props && typeof child.props.onMouseEnter === 'function') {\n          child.props.onMouseEnter(e)\n        }\n        this.prefetch({ priority: true })\n      },\n      onClick: (e: React.MouseEvent) => {\n        if (child.props && typeof child.props.onClick === 'function') {\n          child.props.onClick(e)\n        }\n        if (!e.defaultPrevented) {\n          this.linkClicked(e)\n        }\n      },\n    }\n\n    // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n    // defined, we specify the current 'href', so that repetition is not needed by the user\n    if (\n      this.props.passHref ||\n      (child.type === 'a' && !('href' in child.props))\n    ) {\n      props.href = as || href\n    }\n\n    // Add the ending slash to the paths. So, we can serve the\n    // \"<page>/index.html\" directly.\n    if (process.env.__NEXT_EXPORT_TRAILING_SLASH) {\n      const rewriteUrlForNextExport = require('../next-server/lib/router/rewrite-url-for-export')\n        .rewriteUrlForNextExport\n      if (\n        props.href &&\n        typeof __NEXT_DATA__ !== 'undefined' &&\n        __NEXT_DATA__.nextExport\n      ) {\n        props.href = rewriteUrlForNextExport(props.href)\n      }\n    }\n\n    return React.cloneElement(child, props)\n  }\n}\n\nif (process.env.NODE_ENV === 'development') {\n  const warn = execOnce(console.error)\n\n  // This module gets removed by webpack.IgnorePlugin\n  const PropTypes = require('prop-types')\n  const exact = require('prop-types-exact')\n  // @ts-ignore the property is supported, when declaring it on the class it outputs an extra bit of code which is not needed.\n  Link.propTypes = exact({\n    href: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    prefetch: PropTypes.bool,\n    replace: PropTypes.bool,\n    shallow: PropTypes.bool,\n    passHref: PropTypes.bool,\n    scroll: PropTypes.bool,\n    children: PropTypes.oneOfType([\n      PropTypes.element,\n      (props: any, propName: string) => {\n        const value = props[propName]\n\n        if (typeof value === 'string') {\n          warn(\n            `Warning: You're using a string directly inside <Link>. This usage has been deprecated. Please add an <a> tag as child of <Link>`\n          )\n        }\n\n        return null\n      },\n    ]).isRequired,\n  })\n}\n\nexport default Link\n"]}